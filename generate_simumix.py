import utils.data as dp
import os

wavelength = [
    404,
    419,
    420,
    421,
    424,
    434,
    435,
    439,
    441,
    442,
    444,
    447,
    448,
    450,
    455,
    457,
    458,
    461,
    463,
    464,
    470,
    474,
    479,
    480,
    482,
    484,
    486,
    495,
    496,
    501,
    502,
    503,
    504,
    505,
    506,
    507,
    509,
    511,
    512,
    513,
    514,
    515,
    516,
    517,
    518,
    519,
    520,
    521,
    522,
    523,
    524,
    525,
    526,
    527,
    529,
    530,
    531,
    532,
    533,
    534,
    537,
    538,
    540,
    541,
    542,
    546,
    547,
    548,
    549,
    553,
    554,
    559,
    562,
    565,
    567,
    568,
    569,
    570,
    571,
    573,
    574,
    575,
    576,
    577,
    578,
    579,
    580,
    581,
    582,
    584,
    585,
    589,
    590,
    591,
    593,
    595,
    596,
    599,
    602,
    603,
    604,
    605,
    608,
    610,
    613,
    614,
    616,
    617,
    618,
    619,
    621,
    627,
    629,
    630,
    631,
    636,
    637,
    646,
    649,
    657,
    659,
    660,
    661,
    664,
    666,
    668,
    669,
    670,
    673,
    674,
    691,
    692,
    702,
    703,
    706,
    719,
    720,
    751,
]

# ------------------------------------------------------------------------------
# path_output = "E:\qiqilu\datasets\SimuMix"
# path_phantom = "E:\qiqilu\datasets\SimuMix\gt"
# path_psf = "E:\qiqilu\datasets\SimuMix\psf\BW_1.5_1.4_100_100_100"
# num_simu = 120

# dp.generate_digital_phantom(
#     path_output=path_output,
#     shape=(128, 128, 128),
#     num_simulation=num_simu,
#     is_with_background=False,
# )


# for wl in wavelength:
#     print("-" * 80)
#     print("Wavelength: ", wl)
#     print("-" * 80)
#     dp.generate_synthetic_data(
#         path_output=path_output,
#         path_phantom=path_phantom,
#         path_psf=os.path.join(path_psf, f"{wl}.tif"),
#         psf_crop_shape=None,
#         # psf_crop_shape=(31, 31, 31),
#         std_gauss=0,
#         # std_gauss=0.5,
#         poisson=1,
#         ratio=1,
#         scale_factor=1,
#         conv_padding_mode="constant",
#         # conv_padding_mode="reflect",
#         suffix=f"{wl}",
#     )
# ------------------------------------------------------------------------------

# ------------------------------------------------------------------------------
path_output = "E:\qiqilu\datasets\SimuMix_large"
path_phantom = "E:\qiqilu\datasets\SimuMix_large\gt"

# num_simu = 120 * len(wavelength)
# dp.generate_digital_phantom(
#     path_output=path_output,
#     shape=(128, 128, 128),
#     num_simulation=num_simu,
#     is_with_background=False,
# )

path_psf_list = []
for wl in wavelength:
    path_psf_list.append(
        f"E:\qiqilu\datasets\SimuMix\psf\BW_1.5_1.4_100_100_100\{wl}.tif"
    )

dp.generate_synthetic_data_multiPSF(
    path_output=path_output,
    path_phantom=path_phantom,
    # path_psf=path_psf_list,
    path_psf=None,
    wvl_range=(380, 800),
    aa_range=(15, 72),
    reflective_index=[1.0, 1.33, 1.47, 1.51],
    psf_crop_shape=None,
    # psf_crop_shape=(31, 31, 31),
    std_gauss=0,
    # std_gauss=0.5,
    poisson=1,
    ratio=1,
    scale_factor=1,
    conv_padding_mode="constant",
    # conv_padding_mode="reflect",
    suffix="_mix3",
    verbese=False,
)
# ------------------------------------------------------------------------------
